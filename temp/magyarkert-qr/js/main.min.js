'use strict';(function(){for(var a,b=function(){},c=['assert','clear','count','debug','dir','dirxml','error','exception','group','groupCollapsed','groupEnd','info','log','markTimeline','profile','profileEnd','table','time','timeEnd','timeline','timelineEnd','timeStamp','trace','warn'],d=c.length,e=window.console=window.console||{};d--;)a=c[d],e[a]||(e[a]=b)})();var app={initialize:function initialize(){var a=this;document.addEventListener('DOMContentLoaded',a.onDeviceReady.bind(a),!1)},onDeviceReady:function onDeviceReady(){var a=this;return window.fetch?a.receivedEvent('deviceready'):void a.scriptLoader('//rawcdn.githack.com/taylorhakes/promise-polyfill/e20aa9031b0352d695fc0428cb8bc0145ffc5519/promise.min.js',function(){a.scriptLoader('//rawcdn.githack.com/github/fetch/v2.0.3/fetch.js',function(){return a.receivedEvent('deviceready')})})},getParameterByName:function getParameterByName(a,b){b||(b=window.location.href),a=a.replace(/[\[\]]/g,'\\$&');var c=new RegExp('[?&]'+a+'(=([^&#]*)|&|#|$)'),d=c.exec(b);return d?d[2]?decodeURIComponent(d[2].replace(/\+/g,' ')):'':null},queryString:function queryString(){var a=this,b=a.getParameterByName('c'),c=a.getParameterByName('debug');return{city:b,debug:c}},scriptLoader:function scriptLoader(a,b){var c=document.getElementsByTagName('head')[0],d=document.createElement('script');return d.type='text/javascript',d.src=a,d.defer=!0,'function'==typeof b&&(d.onload=b),c.appendChild(d)},apiDisplay:function apiDisplay(a,b,c){return'<article class="city"><p>'+a+'</p><p>'+b+'</p><p>'+c.map(function(d){return'<img src="'+d+'" alt="" />'}).join('')+'</p></article>'},qrCodeDisplay:function qrCodeDisplay(a,b){var c=this;return c.scriptLoader('js/vendor/jquery.min.js',function(){c.scriptLoader('js/vendor/jquery.qrcode.min.js',function(){var d=document.createElement('script');d.type='text/javascript',d.text='var qrData = {size: '+b+',url: "http://magyarkert.com/qr/?c='+a+'",};jQuery(\'#qrcodeCanvas\').qrcode({render: "canvas",width: qrData.size,height: qrData.size,text: qrData.url,});',d.defer=!0;var e=document.getElementsByTagName('head')[0];e.appendChild(d)})})},receivedEvent:function receivedEvent(a){var b=this,d=document.getElementById(a),c='data/'+b.queryString().city+'/data.json';return fetch(c).then(function(e){return e.ok?e.json():console.log('fetch(streams): Network response was not ok.')}).then(function(e){d.innerHTML+=b.apiDisplay(e.name,e.description,e.pictures);var f=document.getElementById('voice');f.innerHTML+='\n                    <input onclick=\'responsiveVoice.speak("'+e.voice+'", "Hungarian Male", {volume: 1});\' type=\'button\' value=\'\uD83D\uDD0A Play\' />\n                ','true'===b.queryString().debug&&(b.qrCodeDisplay(e.url,295),console.log('Received Event: '+a))}).catch(function(){d.innerHTML='<h1>404</h1><h3>Az oldal nem l\xE9tezik</3>'})}};app.initialize();