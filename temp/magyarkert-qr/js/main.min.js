'use strict';(function(){for(var a,b=function(){},c=['assert','clear','count','debug','dir','dirxml','error','exception','group','groupCollapsed','groupEnd','info','log','markTimeline','profile','profileEnd','table','time','timeEnd','timeline','timelineEnd','timeStamp','trace','warn'],d=c.length,e=window.console=window.console||{};d--;)a=c[d],e[a]||(e[a]=b)})();var app={initialize:function initialize(){var a=this;document.addEventListener('DOMContentLoaded',a.onDeviceReady.bind(a),!1)},onDeviceReady:function onDeviceReady(){var a=this;return void 0===window.fetch?void a.scriptLoader('//rawcdn.githack.com/github/fetch/v2.0.3/fetch.js',function(){return console.log('window.fetch === '+window.fetch),a.receivedEvent('deviceready')}):a.receivedEvent('deviceready')},getParameterByName:function getParameterByName(a,b){b||(b=window.location.href),a=a.replace(/[\[\]]/g,'\\$&');var c=new RegExp('[?&]'+a+'(=([^&#]*)|&|#|$)'),d=c.exec(b);return d?d[2]?decodeURIComponent(d[2].replace(/\+/g,' ')):'':null},scriptLoader:function scriptLoader(a,b){var c=document.getElementsByTagName('head')[0],d=document.createElement('script');return d.type='text/javascript',d.src=a,d.defer=!0,'function'==typeof b&&(d.onload=b),c.appendChild(d)},apiDisplay:function apiDisplay(a,b,c){return'<article class="city"><p>'+a+'</p><p>'+b+'</p><p>'+c.map(function(d){return'<img src="'+d+'" alt="" />'}).join('')+'</p></article>'},qrCodeDisplay:function qrCodeDisplay(a,b){var c=this;return c.scriptLoader('js/vendor/jquery.min.js',function(){c.scriptLoader('js/vendor/jquery.qrcode.min.js',function(){var d=document.createElement('script');d.type='text/javascript',d.text='var qrData = {    size: '+b+',    url: "http://magyarkert.com/qr/?c='+a+'",};jQuery(\'#qrcodeCanvas\').qrcode({    render: "canvas",    width: qrData.size,    height: qrData.size,    text: qrData.url,});',d.defer=!0;var e=document.getElementsByTagName('head')[0];e.appendChild(d)})})},receivedEvent:function receivedEvent(a){var b=this,c=b.getParameterByName('c'),d=b.getParameterByName('debug'),g=document.getElementById(a),f='data/'+{city:c,debug:d}.city+'/data.json';return fetch(f).then(function(h){return h.ok?h.json():console.log('fetch(streams): Network response was not ok.')}).then(function(h){g.innerHTML+=b.apiDisplay(h.name,h.description,h.pictures),'true'===d&&(b.qrCodeDisplay(h.url,295),console.log('Received Event: '+a))}).catch(function(){g.innerHTML='<h1>404</h1><h3>Az oldal nem l\xE9tezik</3>'})}};app.initialize();