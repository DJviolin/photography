// add your custom scripts here
// as the page loads, call these scripts
jQuery(function(e){e(this).trigger("resize")});Modernizr.load([{test:Modernizr.borderradius,nope:[flo.template_dir+"/js/libs/selectivizr.min.js",flo.template_dir+"/js/libs/respond.min.js"]},{test:Modernizr.touch,yep:flo.template_dir+"/css/touch.css"}]);jQuery(function(e){function i(){if(navigator&&navigator.userAgent&&navigator.userAgent!=null){var e=navigator.userAgent.toLowerCase(),t=e.match(/(iphone|ipod|ipad)/);if(t!=null)return!0}return!1}var t=e("body"),n=e(window),r={wrap:e("#wrapper"),head:e("#header-main"),foot:e("#footer-main"),nav:e("#nav-main"),cont:e("#content-main"),title:e("header.page-title"),head_type:t.attr("class").match(/nav-\d+/)[0].replace("nav-","")};e._flo={redefine_scroll:function(n){n.mousewheel(function(n,r,i,s){if(t.hasClass("breakpoint-320"))return!0;if(s>0&&s>i||s<0&&s<i){var o=s*(navigator.appVersion.indexOf("Mac")!=-1?25:75),u=e(this).scrollLeft()+ -o;e(this)[0].scrollLeft=u;e(this).trigger("scroll");return!1}})},position_footer:function(){n.height()>r.wrap.outerHeight()?t.removeClass("footer-static").addClass("footer-fixed"):t.removeClass("footer-fixed").addClass("footer-static")},global_init:function(){function s(){r.nav.find("ul.sub-menu").each(function(){e(this).parent().hover(o)})}function o(){var t=e(this).find("ul"),n=e(this);t.slideToggle("fast",function(){t.is(":visible")?n.addClass("sub-opened"):n.removeClass("sub-opened")})}n.load(function(){e("#loading").fadeOut("slow",function(){e(this).remove();if(t.data("layout")==4){e(".nav-head .advanced").css("height",e(".nav-head").innerHeight()+"px");e(".nav-head .advanced").css("position","relative")}})});n.setBreakpoints({distinct:!0,breakpoints:[320,480,768,980]});n.bind("enterBreakpoint480",function(){t.data("layout")==1&&t.hasClass("nav-01")&&t.removeClass("nav-01").addClass("nav-02")}).bind("enterBreakpoint768",function(){t.data("layout")==1&&t.hasClass("nav-02")&&t.removeClass("nav-02").addClass("nav-01")}).bind("enterBreakpoint980",function(){t.data("layout")==1&&t.hasClass("nav-02")&&t.removeClass("nav-02").addClass("nav-01")});e("a[rel*=external]").each(function(){e(this).attr("target","_blank")});e("img[title], a[title]").attr("title","");n.load(e._flo.position_footer).smartresize(e._flo._position_footer).bind("orientationchange",e._flo._position_footer);(t.data("layout")==1||t.data("layout")==2||t.data("layout")==3)&&r.nav.tinyNav({active:"current-menu-item"});if(Modernizr.fullscreen&&screenfull.enabled){if(t.data("layout")==5){var i=e('<li><a href="#" id="fullscreen5" class="fa-arrows-alt"></a></li>');e(".nav-head .advanced .social").find("ul").find("li").last().after(i)}else{var i=e('<a href="#" id="fullscreen"><i class="fa-arrows-alt"></i></a>');r.foot.after(i)}i.click(function(e){e.preventDefault();screenfull.request(r.wrap[0])});screenfull.onchange=function(){if(screenfull.isFullscreen){i.hide();r.wrap.addClass("scroll")}else{i.show();r.wrap.removeClass("scroll")}}}t.data("layout")==1&&s()},add_pin:function(t){var n={url:document.URL,title:document.title,descr:e('meta[name="description"]').attr("content")};n.url="http://pinterest.com/pin/create/button/?url="+encodeURIComponent(n.url)+"&description="+encodeURIComponent(n.title)+"&media=";var r,i,s;e(".post-thumbnail img, .full .story img, .full .gallery img",t).each(function(){i=e(this);s=i.parent("a");s.length||(s=i);r='<span class="share-btns"><span class="share-pin"><a href="'+n.url+(i.data("src")?i.data("src"):i.attr("src"))+'">Pin It</a></span></span>';s.wrap('<span class="share-img cf"></span>').after(r)});e(".share-img .share-pin a",t).on("click",function(t){t.preventDefault();window.open(e(this).attr("href"),"Pinterest","width=650,height=600,status=0,toolbar=0,menubar=0,location=1,scrollbars=1")})},lazy:function(t,n,r){t.lazyloader("img",{duration:500,before_show:function(t){e(t).closest(n).removeClass("loading")},addScrollTo:r})},lazy_force:function(t,n,r){t.find("img").each(function(){e(this).attr("src",e(this).attr("data-src"));e(this).removeAttr("data-src")})}};e._flo.global_init();e.fn.init_posts=function(){var t=function(t){var n=e(".respond",t),r=e("form",n),i=e("p.error",r),s=e(".cancel-comment-reply a",n),o=e(".comments",t);e(".form-submit #submit",t).addClass("f-func");e(" #reply-title",t).hide();e("a.comment-reply-link",t).on("click",function(r){r.preventDefault();var i=e(this).parents("li.comment");i.find(">div").append(n);s.show();n.find("input[name=comment_post_ID]").val(t.data("post-id"));n.find("input[name=comment_parent]").val(i.data("comment-id"));n.find("input:first").focus()}).attr("onclick","");s.on("click",function(r){r.preventDefault();o.after(n);n.find("input[name=comment_post_ID]").val(t.data("post-id"));n.find("input[name=comment_parent]").val(0);e(this).hide()});r.validate({submitHandler:function(){r.ajaxSubmit({beforeSubmit:function(){i.text("").hide()},success:function(t){var r=e.parseJSON(t);if(r.error){i.html(r.msg).slideDown("fast");return}var u=parseInt(n.find("input[name=comment_parent]").val(),10),a=e(r.html),f;a.hide();e("a[rel*=external]",a).attr("target","_blank");if(u===0){f=o.find("ol");if(!f.length){f=e('<ol class="commentlist"></ol>');o.append(f)}}else{f=e("#comment-"+u).parent().find("ul");if(!f.length){f=e('<ul class="children"></ul>');e("#comment-"+u).parent().append(f)}s.trigger("click")}f.append(a);a.fadeIn("fast").scrollTo();n.find("textarea").clearFields()},error:function(e){var t=e.responseText.match(/<p>(.*)<\/p>/)[1];typeof t=="undefined"&&(t="Something went wrong. Please reload the page and try again.");i.html(t).slideDown("fast")}})}})};e(this).each(function(){var n=e(this);parseInt(flo.lazy_load,10)&&n.find(".full").lazyloader("img",{duration:500});n.hasClass("pin")&&e._flo.add_pin(n);parseInt(flo.ajax_comments,10)&&t(n);e(".video, p",n.find(".full")).fitVids();n.find(".gallery .flexslider").flexslider({animation:"fade",slideshow:!1,controlNav:!1,smoothHeight:!1,keyboard:flo.keyboard_navigations,useCSS:!1,prevText:"<i class='fa-chevron-left'></i>",nextText:"<i class='fa-chevron-right'></i>"})})};e("article.post").init_posts();e.load_posts=function(){var t=e("#flo-load-more-posts"),n=e("div.posts"),r=parseInt(flo.load_start_page,10)+1,i=parseInt(flo.load_max_pages,10),s=flo.load_next_link,o;if(r>i){t.remove();return}t.click(function(u){u.preventDefault();t.data("text",t.text()).text(t.data("loading")).addClass("loading");e.get(s,{},function(u){r++;s=s.replace(/\/page\/[0-9]?/,"/page/"+r);o=e(u).find(".entry");n.append(o);o.css("opacity","0");o.imagesLoaded(function(){var t=n.data("isotope");t?setTimeout(function(){n.fadeIn(1e3).isotope("appended",o)},1e3):n.parent().hasClass("layout-horizontal")&&n.parent().trigger("loaded-posts");n.hasClass("lazyload")&&e._flo.lazy(o,"figure",n)});o.css("opacity","1");r<=i?t.text(t.data("text")).removeClass("loading"):t.fadeOut(600,function(){t.remove()})})})};e.load_posts();e.fn.init_list_horizontal=function(){e(this).each(function(){function c(){s=e(".entry",i);u=n.height()-r.foot.outerHeight(!0)-r.title.outerHeight(!0);u-=parseInt(r.wrap.css("padding-top"),10)+parseInt(r.wrap.css("padding-bottom"),10);u-=parseInt(i.css("margin-bottom"),10);r.head_type=="01"&&n.width()<767||(u-=r.head.outerHeight(!0));if(u<300){u=l.h;a=l.w}else if(u>l.h){u=l.h;a=l.w}u==l.h?a=l.w:a=parseInt(u/l.ratio,10);if(t.width()<480){i.height("auto");s.height("auto").width("auto");f.length&&f.height("auto").css("line-height","1")}else{i.height(u+parseInt(s.css("margin-bottom"),10)+4);s.height(u).width(a);f.length&&f.height(u).css("line-height",u+"px")}}var i=e(this),s=e(".entry",i),o=e("img",s),u,a,f=e(".load-more-posts a"),l={w:300,h:535};l.ratio=l.h/l.w;n.load(function(){c()}).smartresize(c).bind("orientationchange",c);i.on("loaded-posts",function(){c()});e._flo.redefine_scroll(i);i.hasClass("lazyload")&&e._flo.lazy_force(s,"figure",i)})};e("#posts .layout-horizontal, #galleries .layout-horizontal").init_list_horizontal();e.fn.init_list_grid=function(t){t||(t=300);e(this).each(function(){var r=e(this),i=t,s=e("div.entry",r);if(!s.length)return;var o=parseInt(s.css("margin-right"),10);if(o==0){i-=1;o=10}var u={itemSelector:"div.entry",resizable:!1,masonry:{columnWidth:i,maxGutter:o,minGutter:o}};n.load(function(){r.isotope(u);e._flo.position_footer()}).smartresize(function(){r.isotope(u)});r.hasClass("lazyload")&&e._flo.lazy(s,"figure",!1)})};!e("#post").hasClass("w-sidebar")||t.data("layout")!=1&&t.data("layout")!=2&&t.data("layout")!=3?e("#wrapper .layout-preview").init_list_grid():e("#wrapper .w-sidebar .layout-preview").init_list_grid(260);e("#wrapper .layout-masonry").init_list_grid(230);e.fn.init_list_full=function(){e(this).each(function(){var t=e(this),n=e("div.entry",t);if(!n.length)return;t.hasClass("lazyload")&&e._flo.lazy(n,"figure",!1)})};e("#wrapper .layout-full").init_list_full();e.fn.init_slider_gallery=function(){e(this).each(function(){function c(t){var n=0,r=0;t.mousemove(function(t){var i=e(this),s=i.find("i");r=t.pageX-i.offset().left;n=t.pageY-i.offset().top;s.is(":not(:animated):hidden")&&i.trigger("mouseenter");if(r<0||n<0||r>i.width()||n>i.height()){s.is(":animated")||i.trigger("mouseleave");return!1}i.find("i").css({left:r-25,top:n-25})}).mouseenter(function(t){e(this).find("i").stop(!0,!0).fadeIn("fast")}).mouseleave(function(t){e(this).find("i").stop(!0,!0).fadeOut("fast")})}function h(){o=n.height()-r.foot.outerHeight(!0)-r.title.outerHeight(!0);o-=parseInt(r.wrap.css("padding-top"),10)+parseInt(r.wrap.css("padding-bottom"),10);o-=parseInt(i.css("margin-bottom"),10);r.head_type=="01"&&n.width()>767||(o-=r.head.outerHeight(!0));o-=55;u=o;a!="none"&&o>a&&(o=a);o<300&&(o="auto");i.height(o).find(".slides li").height(o).find("img").css("max-height",o);t.css("padding-top",u>o?(u-o)/2:0)}var t=e(this),i=e(".flexslider",t),s=e(".slides",i),o=0,u=0,a=i.data("max-height");a=a=="none"?"none":parseInt(a,10);var f=e(".thumbnails",i),l;i.flexslider({animation:"fade",slideshow:!1,controlNav:!1,smoothHeight:!1,animateHeight:!1,keyboard:flo.keyboard_navigations,useCSS:!1,prevText:"<i class='fa-chevron-left'></i>",nextText:"<i class='fa-chevron-right'></i>",start:function(){if(Modernizr.touch)return;var t=i.find(".flex-direction-nav a");navigator.userAgent.indexOf("Chrome")!=-1&&t.addClass("chrome");c(t);if(f.length){var n=e('<a href="#" class="show-thumbs"><i class="fa-th-large"></i></a>');i.append(n);navigator.userAgent.indexOf("Chrome")!=-1&&n.addClass("chrome");c(n);n.click(function(e){e.preventDefault();t.fadeOut("fast");f.fadeIn("fast")});f.find("a").click(function(n){n.preventDefault();i.flexslider(e(this).parent().index());f.fadeOut("fast");t.fadeIn("fast")})}}});if(!Modernizr.iphone&&!Modernizr.ipod)n.load(function(){h();e._flo.lazy(s,".image",!1)}).smartresize(h).bind("orientationchange",h);else{i.height("auto");e._flo.lazy(s,".image",!1)}})};e("#gallery.gallery-slider").init_slider_gallery();e.fn.init_horizontal_gallery=function(){e(this).each(function(){function h(){f=n.height()-r.foot.outerHeight(!0)-r.title.outerHeight(!0);f-=parseInt(r.wrap.css("padding-top"),10)+parseInt(r.wrap.css("padding-bottom"),10);f-=parseInt(s.css("margin-bottom"),10);l=f;r.head_type=="01"&&n.width()>767||(f-=r.head.outerHeight(!0));l=f;c!="none"&&f>c&&(f=c);f<250&&(f="auto");i.css("padding-top",0);if(t.width()<480||f=="auto"){s.height("auto");u.height("auto");a.height("auto")}else{s.height(f);u.height(f);a.height(f-parseInt(u.css("margin-bottom"),10)-4)}l>f&&i.css("padding-top",(l-f)/2)}var i=e(this),s=e(".gallery",i),o=e("ul.images",s),u=e("li",s),a=e("img",u),f,l,c=s.data("max-height");c=c=="none"?"none":parseInt(c,10);n.load(function(){h();e._flo.lazy_force(u,".image",s)}).smartresize(h).bind("orientationchange",h);e._flo.redefine_scroll(s)})};e("#gallery.gallery-horizontal").init_horizontal_gallery();e.fn.init_homepage=function(){e(this).each(function(){function a(){o=n.height()-r.foot.outerHeight(!0)-r.title.outerHeight(!0);o-=parseInt(r.wrap.css("padding-top"),10)+parseInt(r.wrap.css("padding-bottom"),10);r.head_type=="01"&&n.width()>767||(o-=r.head.outerHeight(!0));u.height(o)}var t=e(this),i=e(".fullscreen",t),s=e(".image-centered",t),o,u;if(i.length){u=i;n.load(function(){a();typeof e.homepage_slides!="undefined"&&e.homepage_slides.length&&i.backstretch(e.homepage_slides,{duration:4e3,fade:750})}).resize(a).bind("orientationchange",a)}else if(s.length){u=s;n.load(function(){a()}).resize(a).bind("orientationchange",a)}})};e("#homepage").init_homepage();e.fn.init_video=function(){e(this).each(function(){var t=e(this);e(".video",t).fitVids()})};e("#video").init_video();e("#videos .video").fitVids();e.fn.init_contact=function(){e(this).each(function(){var t=e(this),n=t.find("form");n.validate();var r=t.find(".success");r.length&&setTimeout(function(){r.slideUp("slow",function(){r.remove()})},5e3)})};e("#contact").init_contact();e.fn.init_archives=function(){e(this).each(function(){var t=e(this),n=e("span.archives-active-year",t),r=e("div.months div.year-months",t),i=e("a.up, a.down",t),s,o,u,a=!1;if(r.length==1){i.remove();s=r.filter(":first").addClass("year-active").show();n.text(s.attr("id").replace(/[^0-9]*/,""));return}i.click(function(t){t.preventDefault();if(a)return;var s=e(this);a=!0;i.css("visibility","visible");var o=r.filter(".year-active");if(s.hasClass("up")){u=o.prev();u.length||(u=r.filter(":last"))}else{u=o.next();u.length||(u=r.filter(":first"))}o.removeClass("year-active").fadeOut(150,function(){u.addClass("year-active").fadeIn(150,function(){a=!1});n.text(u.attr("id").replace(/[^0-9]*/,""));s.hasClass("up")?u.prev().length||i.filter(".up").css("visibility","hidden"):u.next().length||i.filter(".down").css("visibility","hidden")})});s=r.filter(":first").addClass("year-active").show();n.text(s.attr("id").replace(/[^0-9]*/,""));i.filter(".up").css("visibility","hidden")})};e(document).ready(function(e){i()&&e("ul.images").css({"overflow-y":"auto","-webkit-overflow-scrolling":"touch"});if(flo.is_mobile){e(".royalSlider").royalSlider({keyboardNavEnabled:!0,controlNavigation:"thumbnails",autoScaleSlider:!0,transitionType:"move",allowCSS3:!1,fitInViewport:!0,controlsInside:!0,fullscreen:{enabled:!0,nativeFS:!1}});var t=e(".royalSlider").data("royalSlider");e(".rsArrowRight").html("<a><i class='fa-chevron-right'></i></a>");e(".rsArrowLeft").html("<a><i class='fa-chevron-left'></i></a>");e(".rsFullscreenBtn").html("<a><i class='fa-arrows-alt'></i></a>");e(".royalSlider").lazyloader(".rsTmb",{duration:500});e("#gallery-fullscreen-togglem").click(function(n){n.preventDefault();var r=e(this),i=r.find("span");if(e("#gallery").hasClass("fullscreen-enabled")){e("#gallery-header").append(r);r.data("exit",i.text());i.text(r.data("enter"));t.exitFullscreen();e("#gallery").removeClass("fullscreen-enabled")}else{t.enterFullscreen();e("#gallery").addClass("fullscreen-enabled");r.data("enter",i.text());i.text(r.data("exit"))}})}e(".share span").on("click",function(t){t.preventDefault();e(this).data("share")&&window.open(e(this).data("share"))});e("#menu-sh").on("click",function(t){t.preventDefault();e(".nav-head").slideToggle("medium",function(){if(e(".nav-head").is(":visible")){e(".nav-head").css("display","inline-block");e(".nav-head .advanced").css("height",e(".nav-head").innerHeight()+"px");e(".nav-head .advanced").css("position","relative")}})});e("#menu-sh-mb").on("click",function(t){t.preventDefault();var n=e("#wrapper").css("right");if(n==="0px"||n=="auto"){e(".nav-head").css("height",e("#wrapper").innerHeight()+"px");e("#wrapper").css("overflow","visible");e("#wrapper").animate({right:"+=200px"},"medium")}else{e("#wrapper").animate({right:"-=200px"},"medium");e("#wrapper").css("overflow","hidden");e(".nav-head").css("height",e("#header-main").innerHeight()+"px")}});jQuery(window).on("resize",function(){e("#wrapper").css("right","0px");e("#wrapper").css("overflow","hidden");e(".nav-head").css("height",e(".nav-head .advanced").innerHeight()+"px")})})});